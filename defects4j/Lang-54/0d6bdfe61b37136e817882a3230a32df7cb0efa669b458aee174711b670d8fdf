{
    "generation": "public static Locale toLocale(String str) {\n    if (str == null) {\n        return null;\n    }\n    int len = str.length();\n    if (len < 2 || len > 255) {\n        throw new IllegalArgumentException(\"Invalid locale format: \" + str);\n    }\n    if (len == 2) {\n        // Only language\n        if (isLowerCase(str, 0, 2)) {\n            return new Locale(str, \"\");\n        }\n    } else {\n        int firstSepIndex = str.indexOf('_');\n        if (firstSepIndex == -1) {\n            throw new IllegalArgumentException(\"Invalid locale format: \" + str);\n        }\n        String language = str.substring(0, firstSepIndex);\n        if (!isLowerCase(language)) {\n            throw new IllegalArgumentException(\"Invalid locale format: \" + str);\n        }\n        if (firstSepIndex + 1 >= len) {\n            throw new IllegalArgumentException(\"Invalid locale format: \" + str);\n        }\n        char ch = str.charAt(firstSepIndex + 1);\n        if (ch == '_') {\n            // Only language and variant\n            String variant = str.substring(firstSepIndex + 1);\n            return new Locale(language, \"\", variant);\n        } else {\n            // Language and country\n            int secondSepIndex = str.indexOf('_', firstSepIndex + 1);\n            if (secondSepIndex == -1) {\n                String country = str.substring(firstSepIndex + 1);\n                if (!isUpperCase(country)) {\n                    throw new IllegalArgumentException(\"Invalid locale format: \" + str);\n                }\n                return new Locale(language, country);\n            } else {\n                String country = str.substring(firstSepIndex + 1, secondSepIndex);\n                if (!isUpperCase(country)) {\n                    throw new IllegalArgumentException(\"Invalid locale format: \" + str);\n                }\n                String variant = str.substring(secondSepIndex + 1);\n                return new Locale(language, country, variant);\n            }\n        }\n    }\n    throw new IllegalArgumentException(\"Invalid locale format: \" + str);\n}\n\nprivate static boolean isLowerCase(String str) {\n    return str.equals(str.toLowerCase());\n}\n\nprivate static boolean isUpperCase(String str) {\n    return str.equals(str.toUpperCase());\n}\n\nprivate static boolean isLowerCase(String str, int start, int end) {\n    for (int i = start; i < end; i++) {\n        char c = str.charAt(i);\n        if (c < 'a' || c > 'z') {\n            return false;\n        }\n    }\n    return true;\n}",
    "exact_match": false,
    "ast_match": false,
    "compile": true,
    "test": false
}