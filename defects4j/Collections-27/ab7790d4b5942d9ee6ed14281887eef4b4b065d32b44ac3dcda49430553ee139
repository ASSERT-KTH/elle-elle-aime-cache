{
    "generation": "import java.io.IOException;\nimport java.io.ObjectInputStream;\nimport java.io.ObjectOutputStream;\nimport java.io.Serializable;\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\nimport org.apache.commons.collections4.CollectionUtils;\nimport org.apache.commons.collections4.Factory;\nimport org.apache.commons.collections4.MultiMap;\nimport org.apache.commons.collections4.Transformer;\nimport org.apache.commons.collections4.functors.ConstantFactory;\nimport org.apache.commons.collections4.functors.FactoryTransformer;\n\npublic class MultiValueMap<K, V> extends AbstractMapDecorator<K, Object>\n        implements MultiMap<K, V>, Serializable {\n\n    /** Serialization version */\n    private static final long serialVersionUID = -2214118012697036722L;\n\n    /** The factory to create the collection */\n    private final Factory<? extends Collection<V>> collectionFactory;\n\n    /** The factory used to transform non-collections into collections */\n    private transient Transformer nonCollectionFactory;\n\n\n    /**\n     * Write the map out using a custom routine.\n     * @param out the output stream\n     * @throws IOException\n     */\n    private void writeObject(final ObjectOutputStream out) throws IOException {\n        out.defaultWriteObject();\n        out.writeObject(collectionFactory);\n    }\n\n    /**\n     * Read the map in using a custom routine.\n     * @param in the input stream\n     * @throws IOException\n     * @throws ClassNotFoundException\n     */\n    @SuppressWarnings(\"unchecked\")\n    private void readObject(final ObjectInputStream in) throws IOException, ClassNotFoundException {\n        in.defaultReadObject();\n        collectionFactory = (Factory<? extends Collection<V>>) in.readObject();\n        if (collectionFactory.create() instanceof Serializable == false) {\n             throw new UnsupportedOperationException(\"MultiValueMap does not support Serializable \" +\n                     \"collection factories where the collection is not Serializable\");\n        }\n    }\n\n\n}",
    "exact_match": false,
    "ast_match": false,
    "compile": false,
    "test": false
}