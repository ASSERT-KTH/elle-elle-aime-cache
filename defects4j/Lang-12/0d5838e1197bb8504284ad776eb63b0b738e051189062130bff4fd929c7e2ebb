{
    "generation": "public static String random(int count, int start, int end, boolean letters, boolean numbers,\n                            char[] chars, Random random) {\n    if (count == 0) {\n        return \"\";\n    } else if (count < 0) {\n        throw new IllegalArgumentException(\"Requested random string length \" + count + \" is less than 0.\");\n    }\n\n    if (chars != null && chars.length == 0) {\n        throw new IllegalArgumentException(\"Char array must not be empty.\");\n    }\n\n    if (start == 0 && end == 0) {\n        if (!letters && !numbers) {\n            start = 0;\n            end = Integer.MAX_VALUE;\n        } else {\n            start = ' ';\n            end = 'z' + 1;\n        }\n    }\n\n    int gap = end - start;\n    if (gap <= 0) {\n        throw new IllegalArgumentException(\"Invalid range: start (\" + start + \") must be less than end (\" + end + \").\");\n    }\n\n    char[] buffer = new char[count];\n    int index;\n    char ch;\n\n    for (int i = 0; i < count; i++) {\n        if (chars == null) {\n            ch = (char) (random.nextInt(gap) + start);\n        } else {\n            index = random.nextInt(gap);\n            if (index >= chars.length) {\n                throw new ArrayIndexOutOfBoundsException(\"Index: \" + index + \", Length: \" + chars.length);\n            }\n            ch = chars[index + start];\n        }\n\n        if ((letters && Character.isLetter(ch)) ||\n            (numbers && Character.isDigit(ch)) ||\n            (!letters && !numbers)) {\n            if (ch >= 56320 && ch <= 57343) {\n                if (i == count - 1) {\n                    i--; // Retry generating this character\n                } else {\n                    // Low surrogate, insert high surrogate after putting it in\n                    buffer[i] = ch;\n                    buffer[i + 1] = (char) (55296 + random.nextInt(128));\n                    i++;\n                }\n            } else if (ch >= 55296 && ch <= 56191) {\n                if (i == count - 1) {\n                    i--; // Retry generating this character\n                } else {\n                    // High surrogate, insert low surrogate before putting it in\n                    buffer[i] = (char) (56320 + random.nextInt(128));\n                    buffer[i + 1] = ch;\n                    i++;\n                }\n            } else if (ch >= 56192 && ch <= 56319) {\n                // Private high surrogate, skip it\n                i--;\n            } else {\n                buffer[i] = ch;\n            }\n        } else {\n            i--; // Retry generating this character\n        }\n    }\n    return new String(buffer);\n}",
    "exact_match": false,
    "ast_match": false,
    "compile": true,
    "test": false
}