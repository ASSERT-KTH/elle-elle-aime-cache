{
    "generation": "public Range getDataRange(ValueAxis axis) {\n    Range result = null;\n    List<XYDataset> mappedDatasets = new ArrayList<>();\n    List<XYAnnotation> includedAnnotations = new ArrayList<>();\n    boolean isDomainAxis = true;\n\n    // Determine if the axis is a domain axis\n    int domainIndex = getDomainAxisIndex(axis);\n    if (domainIndex >= 0) {\n        isDomainAxis = true;\n        Collection<?> domainMappedDatasets = getDatasetsMappedToDomainAxis(new Integer(domainIndex));\n        if (domainMappedDatasets != null) {\n            mappedDatasets.addAll(domainMappedDatasets);\n        }\n        if (domainIndex == 0) {\n            collectAnnotations(includedAnnotations);\n        }\n    } else {\n        // Determine if the axis is a range axis\n        int rangeIndex = getRangeAxisIndex(axis);\n        if (rangeIndex >= 0) {\n            isDomainAxis = false;\n            Collection<?> rangeMappedDatasets = getDatasetsMappedToRangeAxis(new Integer(rangeIndex));\n            if (rangeMappedDatasets != null) {\n                mappedDatasets.addAll(rangeMappedDatasets);\n            }\n            if (rangeIndex == 0) {\n                collectAnnotations(includedAnnotations);\n            }\n        }\n    }\n\n    // Iterate through the datasets that map to the axis and get the union of the ranges\n    for (Object obj : mappedDatasets) {\n        if (obj instanceof XYDataset) {\n            XYDataset d = (XYDataset) obj;\n            if (d != null) {\n                XYItemRenderer r = getRendererForDataset(d);\n                Range datasetRange = null;\n                if (isDomainAxis) {\n                    if (r != null) {\n                        datasetRange = r.findDomainBounds(d);\n                    }\n                    if (datasetRange == null) {\n                        datasetRange = DatasetUtilities.findDomainBounds(d);\n                    }\n                } else {\n                    if (r != null) {\n                        datasetRange = r.findRangeBounds(d);\n                    }\n                    if (datasetRange == null) {\n                        datasetRange = DatasetUtilities.findRangeBounds(d);\n                    }\n                }\n                if (datasetRange != null) {\n                    result = Range.combine(result, datasetRange);\n                }\n\n                // Add renderer annotations if they implement XYAnnotationBoundsInfo\n                Collection<?> rendererAnnotations = (r != null) ? r.getAnnotations() : null;\n                if (rendererAnnotations != null) {\n                    for (Object annotationObj : rendererAnnotations) {\n                        if (annotationObj instanceof XYAnnotation && annotationObj instanceof XYAnnotationBoundsInfo) {\n                            includedAnnotations.add((XYAnnotation) annotationObj);\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    // Combine ranges from included annotations\n    for (XYAnnotation annotation : includedAnnotations) {\n        if (annotation instanceof XYAnnotationBoundsInfo) {\n            XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) annotation;\n            if (xyabi.getIncludeInDataBounds()) {\n                Range annotationRange = isDomainAxis ? xyabi.getXRange() : xyabi.getYRange();\n                if (annotationRange != null) {\n                    result = Range.combine(result, annotationRange);\n                }\n            }\n        }\n    }\n\n    return result;\n}\n\nprivate void collectAnnotations(List<XYAnnotation> includedAnnotations) {\n    Iterator<XYAnnotation> iterator = this.annotations.iterator();\n    while (iterator.hasNext()) {\n        XYAnnotation annotation = iterator.next();\n        if (annotation instanceof XYAnnotationBoundsInfo) {\n            includedAnnotations.add(annotation);\n        }\n    }\n}",
    "exact_match": false,
    "ast_match": false,
    "compile": false,
    "test": false
}