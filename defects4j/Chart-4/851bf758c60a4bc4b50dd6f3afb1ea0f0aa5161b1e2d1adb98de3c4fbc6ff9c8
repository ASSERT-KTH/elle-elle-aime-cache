{
    "generation": "/**\n * Returns the range for the specified axis.\n *\n * @param axis  the axis.\n *\n * @return The range.\n */\npublic Range getDataRange(ValueAxis axis) {\n\n    Range result = null;\n    List mappedDatasets = new ArrayList();\n    List includedAnnotations = new ArrayList();\n    boolean isDomainAxis = true;\n\n    // is it a domain axis?\n    int domainIndex = getDomainAxisIndex(axis);\n    if (domainIndex >= 0) {\n        isDomainAxis = true;\n        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(new Integer(domainIndex)));\n        if (domainIndex == 0) {\n            // grab the plot's annotations\n            Iterator iterator = this.annotations.iterator();\n            while (iterator.hasNext()) {\n                XYAnnotation annotation = (XYAnnotation) iterator.next();\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(annotation);\n                }\n            }\n        }\n    }\n\n    // or is it a range axis?\n    int rangeIndex = getRangeAxisIndex(axis);\n    if (rangeIndex >= 0) {\n        isDomainAxis = false;\n        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(new Integer(rangeIndex)));\n        if (rangeIndex == 0) {\n            Iterator iterator = this.annotations.iterator();\n            while (iterator.hasNext()) {\n                XYAnnotation annotation = (XYAnnotation) iterator.next();\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(annotation);\n                }\n            }\n        }\n    }\n\n    // iterate through the datasets that map to the axis and get the union\n    // of the ranges.\n    if (mappedDatasets != null) {\n        Iterator iterator = mappedDatasets.iterator();\n        while (iterator.hasNext()) {\n            XYDataset d = (XYDataset) iterator.next();\n            if (d != null) {\n                XYItemRenderer r = getRendererForDataset(d);\n                if (isDomainAxis) {\n                    if (r != null) {\n                        Range r1 = r.findDomainBounds(d);\n                        if (r1 != null) {\n                            result = Range.combine(result, r1);\n                        }\n                    } else {\n                        Range r1 = DatasetUtilities.findDomainBounds(d);\n                        if (r1 != null) {\n                            result = Range.combine(result, r1);\n                        }\n                    }\n                } else {\n                    if (r != null) {\n                        Range r1 = r.findRangeBounds(d);\n                        if (r1 != null) {\n                            result = Range.combine(result, r1);\n                        }\n                    } else {\n                        Range r1 = DatasetUtilities.findRangeBounds(d);\n                        if (r1 != null) {\n                            result = Range.combine(result, r1);\n                        }\n                    }\n                }\n                \n                if (r != null) {\n                    Collection c = r.getAnnotations();\n                    if (c != null) {\n                        Iterator i = c.iterator();\n                        while (i.hasNext()) {\n                            XYAnnotation a = (XYAnnotation) i.next();\n                            if (a instanceof XYAnnotationBoundsInfo && a != null) {\n                                includedAnnotations.add(a);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    if (includedAnnotations != null) {\n        Iterator it = includedAnnotations.iterator();\n        while (it.hasNext()) {\n            XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) it.next();\n            if (xyabi != null && xyabi.getIncludeInDataBounds()) {\n                if (isDomainAxis) {\n                    Range xRange = xyabi.getXRange();\n                    if (xRange != null) {\n                        result = Range.combine(result, xRange);\n                    }\n                } else {\n                    Range yRange = xyabi.getYRange();\n                    if (yRange != null) {\n                        result = Range.combine(result, yRange);\n                    }\n                }\n            }\n        }\n    }\n\n    return result;\n}",
    "exact_match": false,
    "ast_match": false,
    "compile": true,
    "test": true
}