{
    "generation": "private Position decodeLocation(DeviceSession deviceSession, ByteBuf buf) {\n\n    Position position = new Position(getProtocolName());\n    position.setDeviceId(deviceSession.getDeviceId());\n\n    int index = buf.readerIndex();\n\n    // Extended protocol header\n    if (buf.getUnsignedMediumLE(index) == 0x7E020000) {\n\n        index += 4;\n\n        int type = buf.getUnsignedShortLE(index);\n\n        index += 2;\n\n        // Length of data block without header\n        int dataLength = buf.getUnsignedShortLE(index);\n\n        index += 2;\n\n        if (type == 0x5501) {\n\n            buf.skipBytes(6); // unknown\n            position.set(Position.KEY_RESULT, readString(buf, 25));\n\n            return position;\n\n        }\n\n        // BMS device\n        else if (type == 0x5502) {\n\n            buf.skipBytes(1); // subtype\n            buf.skipBytes(6); // mac\n\n            position.set(\"string\", buf.readUnsignedByte() == 1);\n            position.set(\"cover\", buf.readUnsignedByte() == 1);\n            position.set(Position.KEY_MOTION, buf.readUnsignedByte() == 1);\n\n            //...\n\n            return position;\n        }\n    }\n\n    buf.readerIndex(index);\n\n    // Standard protocol\n\n    position.set(Position.KEY_ALARM, decodeAlarm(buf.readUnsignedInt()));\n\n    decodeCoordinates(position, buf);\n\n    position.setAltitude(buf.readShort());\n    position.setSpeed(UnitsConverter.knotsFromKph(buf.readUnsignedShort() * 0.1));\n    position.setCourse(buf.readUnsignedShort());\n    position.setTime(readDate(buf, deviceSession.get(DeviceSession.KEY_TIMEZONE)));\n\n    //...\n\n    return position;\n}",
    "exact_match": false,
    "ast_match": false,
    "compile": null,
    "test": false
}