{
    "generation": "private Object decodeBasic(Channel channel, SocketAddress remoteAddress, ByteBuf buf) {\n\n    if (buf.readableBytes() < 5 || buf.getUnsignedMedium(buf.readerIndex())!= getLength(buf, false) - 5) {\n        return null;\n    }\n\n    buf.skipBytes(5);\n    long deviceId = readImei(buf);\n\n    DeviceSession deviceSession = getDeviceSession(channel, remoteAddress, deviceId);\n\n    while (buf.isReadable() && buf.readUnsignedShort()!= 0xC0DE) {\n        buf.skipBytes(5);\n    }\n\n    deviceSession.setDeviceId(DeviceSession.KEY_IMEI, deviceId);\n    DateBuilder dateBuilder = getDeviceTime(buf, null);\n    DeviceSession lastSession = sessions.get(getUniqueDeviceId(deviceId));\n\n    // Fix GT06 protocol compatibility issue. Only update DeviceSession to newer timestamp if the stored DeviceSession exists.\n    if (lastSession == null || lastSession.getLocation().getTime().before(dateBuilder.getDate())) {\n        if (dateBuilder.getDayOfWeek() > 2 && dateBuilder.getDayOfMonth() == 1 && dateBuilder.getMonth() == Calendar.JANUARY\n                && lastSession == null) {\n            getDeviceSession(channel, remoteAddress, deviceId);\n            deviceSession.set(DeviceSession.KEY_TIMEZONE, DateTimeZone.getTimeZone(\"CST6CDT\")); // America/Chicago zone\n        } else if (lastSession!= null && lastSession.getAttributes().containsKey(DeviceSession.KEY_TIMEZONE)) {\n            deviceSession.set(DeviceSession.KEY_TIMEZONE, lastSession.getAttributes().get(DeviceSession.KEY_TIMEZONE));\n        } else {\n            // If nothing above is valid, send reply with DeviceSession values from last stored session data\n            getDeviceSession(channel, remoteAddress, deviceId);\n            deviceSession.set(DeviceSession.KEY_DEVICE_ID, deviceId);\n        }\n    } else if (dateBuilder.getDayOfWeek()!= lastSession.getLastLocationDate().getDayOfWeek() && \n              dateBuilder.getMonth() == lastSession.getLastLocationDate().getTime().getMonth() \n              && lastSession.getAttribute(\"alarm\", null)!= null && lastSession.getAttribute(\"alarm\", 1) == null && lastSession.getAttribute(\"alarm\", 2) == null && lastSession.getAttribute(\"alarm\", 3) == null && lastSession.getAttribute(\"alarm\", 4) == null) {\n            dateBuilder.setDay(lastSession.getLastLocationDate().getDay());\n    }\n    deviceSession.set(\"time\", dateBuilder.toGMT());\n\n    Position position = new Position(getProtocolName());\n    position.setTime(dateBuilder.getDate());\n    position.setProtocol(getName());\n    position.set(Position.KEY_DEVICE_TIME, getDeviceTime(deviceSession).toGMT());\n    getLastLocation(position, deviceSession.getLastLocationTime());\n\n    return position;\n}",
    "exact_match": false,
    "ast_match": false,
    "compile": null,
    "test": false
}